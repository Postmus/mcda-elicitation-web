<div class="grid-x">
  <div class="cell">
    <span>Problem:</span>
    <select class="scenario-select" ng-model="subProblem" ng-options="subProblem.title for subProblem in subProblems track by subProblem.id" ng-change="subProblemChanged(subProblem)"></select>
    <inline-help help-key="problem"></inline-help>
    <a ng-if="editMode.isUserOwner" ng-click="editSubProblemTitle()" tooltip="Edit current problem title"><i class="fa fa-edit"></i></a>
    <a ng-if="editMode.isUserOwner" ng-click="openCreateDialog()" tooltip="Create new problem"><i class="fa fa-plus"></i></a>
  </div>
</div>
<br>
<div class="grid-x underlined-div">
  <div class="cell large-10">
    <h4>Effects table <inline-help help-key="effects-table"></inline-help></h4>
  </div>
  <div class="cell large-2">
    <button class="button small info clipboard-button" data-clipboard-target="#effecttable">
      <i class="fa fa-clipboard"></i> Copy to clipboard
    </button>
  </div>
  <div class="cell">
    <span class="toggle-text">Effects</span>
    <span class="switch">
        <input class="switch-input" id="showStudyDataToggle" type="checkbox" ng-model="showStudyData.value">
        <label class="switch-paddle" ng-if="studyDataAvailable" for="showStudyDataToggle"></label>
        <label class="switch-paddle" ng-if="!studyDataAvailable" tooltip-append-to-body="true" tooltip="Cannot show study data if all data is relative or exact"></label>
    </span>
    <span class="toggle-text">Study data</span>
  </div>
  <div class="cell">
    <table class="full-width effects-table" id="effecttable">
      <thead>
        <tr>
          <th>Criterion
            <inline-help help-key="criterion"></inline-help>
          </th>
          <th>Description</th>
          <th>Units
            <inline-help help-key="criterion-unit"></inline-help>
          </th>
          <th class="text-center" ng-repeat="alternative in alternatives">
            <label>
              {{alternative.title}}
            </label>
          </th>
        </tr>
      </thead>
      <tbody class="main">
        <tr ng-repeat="criterion in criteria">
          <td>
            <label>
              {{criterion.title}}
            </label>
          </td>
          <td>
            {{criterion.description}}
          </td>
          <td>{{criterion.unitOfMeasurement}}</td>
          <td class="text-center" ng-repeat="alternative in alternatives" name="col{{$index}}" id="col{{$index}}">
            <div ng-show="!effectsTableInfo[criterion.id].hasStudyData || !showStudyData.value">
              {{scales.observed[criterion.id][alternative.id]['50%'] | number}}
            </div>
            <div class="uncertain" ng-show="effectsTableInfo[criterion.id].distributionType !== 'exact' && (effectsTableInfo[criterion.id].distributionType === 'relative' || !showStudyData.value)">
              {{scales.observed[criterion.id][alternative.id]['2.5%'] | number}}, {{scales.observed[criterion.id][alternative.id]['97.5%'] | number}}
            </div>
            <div ng-if="effectsTableInfo[criterion.id].hasStudyData && showStudyData.value">
              {{effectsTableInfo[criterion.id].studyDataLabels[alternative.id]}}
          </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
<div class="grid-x">
  <div class="cell large-10">
    <h4>Scale Ranges
      <inline-help help-key="scale-ranges"></inline-help>
    </h4>
  </div>
  <div class="cell large-2">
    <button class="button small info clipboard-button" data-clipboard-target="#scalestable">
      <i class="fa fa-clipboard"></i> Copy to clipboard
    </button>
  </div>
  <div class="cell">
    <table class="full-width" id="scalestable">
      <thead>
        <tr>
          <th>Criterion
            <inline-help help-key="criterion"></inline-help>
          </th>
          <th>Theoretical Range
            <inline-help help-key="theoretical-range"></inline-help>
          </th>
          <th>Observed Range
            <inline-help help-key="observed-range"></inline-help>
          </th>
          <th>Configured Range
            <inline-help help-key="configured-range"></inline-help>
          </th>
          <th>Units
            <inline-help help-key="criterion-unit"></inline-help>
          </th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="criterion in criteria">
          <td>{{criterion.title}}</td>
          <td>{{scales.theoreticalScales[criterion.id][0] | number}}, {{scales.theoreticalScales[criterion.id][1] | number}}</td>
          <td>
            <span ng-bind="intervalHull(scales.observed[criterion.id])[0] | number"></span> ,
            <span ng-bind="intervalHull(scales.observed[criterion.id])[1] | number"></span>
          </td>
          <td>
            <span ng-if="criterion.pvf.range">{{criterion.pvf.range[0] | number}}, {{criterion.pvf.range[1] | number}}</span>
            <span ng-if="!criterion.pvf.range">
              <span ng-bind="intervalHull(scales.observed[criterion.id])[0] | number"></span> ,
            <span ng-bind="intervalHull(scales.observed[criterion.id])[1] | number"></span>
            </span>
          </td>
          <td>{{criterion.unitOfMeasurement}}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>